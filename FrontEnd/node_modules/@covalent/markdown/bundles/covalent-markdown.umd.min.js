!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/platform-browser"),require("@angular/core"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@covalent/markdown",["exports","@angular/common","@angular/platform-browser","@angular/core","@angular/common/http"],t):t((e.covalent=e.covalent||{},e.covalent.markdown={}),e.ng.common,e.ng.platformBrowser,e.ng.core,e.ng.common.http)}(this,function(e,t,o,a,n){"use strict";var s=function(){return(s=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(t,i,a,s){return new(a=a||Promise)(function(e,o){function n(e){try{d(s.next(e))}catch(t){o(t)}}function r(e){try{d(s["throw"](e))}catch(t){o(t)}}function d(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}d((s=s.apply(t,i||[])).next())})}function h(n,r){var d,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function o(e){if(d)throw new TypeError("Generator is already executing.");for(;s;)try{if(d=1,i&&(a=2&e[0]?i["return"]:e[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{d=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function d(e){return e?e.replace(/^#+/,""):undefined}function i(e){return e?e.replace(/\#.*/,""):undefined}function l(e){return e?d(e.replace(/(_|-|\s)+/g,"")).toLowerCase():undefined}function p(e,t){if(e&&t){var o=l(t),n=e.parentElement,r=void 0,d=e.querySelector('[id="'+o+'"]');d?r=d:n&&(r=n.querySelector('[id="'+o+'"]')),r?r.scrollIntoView({behavior:"auto"}):console.warn("Could not jump to heading '"+t+"'")}}function m(e){if(e)return e.getAttribute("href").startsWith("#")}function c(e){if(e){var t=new URL(e);return t.pathname.startsWith("/raw/")?e:(t.hostname="raw.githubusercontent.com",t.pathname=t.pathname.split("/blob",2).join(""),t.href)}return undefined}function g(e){try{return"github.com"===new URL(e).hostname}catch(t){return!1}}var w=require("showdown/dist/showdown.js");function u(e,t){if(e&&t){var o=new URL(e).pathname.split("/").slice(1,-1).join("/"),n=new URL(e);if(t.startsWith("/")){var r=o.split("/").slice(0,3).join("/");n.pathname=""+r+t}else n.pathname=o+"/"+t;return n.href}return undefined}var k=(Object.defineProperty(f.prototype,"content",{set:function(e){this._content=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"simpleLineBreaks",{set:function(e){this._simpleLineBreaks=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"hostedUrl",{set:function(e){this._hostedUrl=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"anchor",{set:function(e){this._anchor=e},enumerable:!0,configurable:!0}),f.prototype.ngOnChanges=function(e){!e.anchor||e.content||e.simpleLineBreaks||e.hostedUrl?this.refresh():p(this._elementRef.nativeElement,this._anchor)},f.prototype.ngAfterViewInit=function(){this._content||this._loadContent(this._elementRef.nativeElement.textContent),this._viewInit=!0},f.prototype.ngOnDestroy=function(){this.removeAnchorListeners()},f.prototype.refresh=function(){this._content?this._loadContent(this._content):this._viewInit&&this._loadContent(this._elementRef.nativeElement.textContent)},f.prototype._loadContent=function(e){var t=this;e&&0<e.trim().length&&(this._renderer.setProperty(this._elementRef.nativeElement,"innerHTML",""),this._elementFromString(this._render(e))),this.removeAnchorListeners(),this.handleAnchorClicksBound=this.handleAnchorClicks.bind(this),this.attachAnchorListeners(),setTimeout(function(){return p(t._elementRef.nativeElement,t._anchor)},250),this.onContentReady.emit()},f.prototype.handleAnchorClicks=function(n){return r(this,void 0,void 0,function(){var t,o;return h(this,function(e){return n.preventDefault(),t=new URL(n.target.href),o=decodeURI(t.hash),p(this._elementRef.nativeElement,o),[2]})})},f.prototype.attachAnchorListeners=function(){var t=this;Array.from(this._elementRef.nativeElement.querySelectorAll("a[href]")).filter(function(e){return m(e)}).forEach(function(e){return e.addEventListener("click",t.handleAnchorClicksBound)})},f.prototype.removeAnchorListeners=function(){var t=this;Array.from(this._elementRef.nativeElement.querySelectorAll("a[href]")).filter(function(e){return m(e)}).forEach(function(e){return e.removeEventListener("click",t.handleAnchorClicksBound)})},f.prototype._elementFromString=function(e){var t=this._renderer.createElement("div");this._renderer.appendChild(this._elementRef.nativeElement,t);var o=function n(e){if(e){var t=(new DOMParser).parseFromString(e,"text/html");return t.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(function(e){var t=l(e.innerHTML);e.setAttribute("id",t)}),(new XMLSerializer).serializeToString(t)}return e}(function r(e,n){if(n){var t=(new DOMParser).parseFromString(e,"text/html");return t.querySelectorAll("img[src]").forEach(function(e){var t=e.getAttribute("src");try{new URL(t),g(t)&&(e.src=c(t))}catch(o){e.src=u(g(n)?c(n):n,t)}}),(new XMLSerializer).serializeToString(t)}return e}(function d(e,r){if(r){var t=(new DOMParser).parseFromString(e,"text/html");return t.querySelectorAll("a[href]").forEach(function(e){var t=new URL(e.href),o=t.hash;if(m(e))o&&(t.hash=l(o),e.href=t.hash);else if(t.host===window.location.host){if(t.pathname.endsWith(".md")){var n=i(e.getAttribute("href"));t.href=u(r,n),o&&(t.hash=l(o)),e.href=t.href}e.target="_blank"}else t.pathname.endsWith(".md")&&(o&&(t.hash=l(o)),e.href=t.href),e.target="_blank"}),(new XMLSerializer).serializeToString(t)}return e}(this._domSanitizer.sanitize(a.SecurityContext.HTML,e),this._hostedUrl),this._hostedUrl));return t.innerHTML=o,t},f.prototype._render=function(e){var t=(e=e.replace(/^(\s|\t)*\n+/g,"").replace(/(\s|\t)*\n+(\s|\t)*$/g,"")).split("\n"),o=t[0].match(/^(\s|\t)*/)[0],n=new RegExp("^"+o),r=(t=t.map(function(e){return e.replace(n,"")})).join("\n"),d=new w.Converter;return d.setOption("ghCodeBlocks",!0),d.setOption("tasklists",!0),d.setOption("tables",!0),d.setOption("simpleLineBreaks",this._simpleLineBreaks),d.makeHtml(r)},f.decorators=[{type:a.Component,args:[{selector:"td-markdown",template:"<ng-content></ng-content>",styles:[':host.td-markdown::ng-deep a{background-color:transparent;-webkit-text-decoration-skip:objects;text-decoration:none}:host.td-markdown::ng-deep a:active,:host.td-markdown::ng-deep a:hover{outline-width:0;text-decoration:underline}:host.td-markdown::ng-deep strong{font-weight:bolder}:host.td-markdown::ng-deep h1{margin:.67em 0}:host.td-markdown::ng-deep img{border-style:none}:host.td-markdown::ng-deep svg:not(:root){overflow:hidden}:host.td-markdown::ng-deep code,:host.td-markdown::ng-deep kbd,:host.td-markdown::ng-deep pre{font-family:monospace,monospace;font-size:1em}:host.td-markdown::ng-deep hr{-webkit-box-sizing:content-box;box-sizing:content-box}:host.td-markdown::ng-deep input{margin:0;overflow:visible;font:13px/1.4 Helvetica,arial,nimbussansl,liberationsans,freesans,clean,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}:host.td-markdown::ng-deep [type=button]:-moz-focusring,:host.td-markdown::ng-deep [type=reset]:-moz-focusring,:host.td-markdown::ng-deep [type=submit]:-moz-focusring,:host.td-markdown::ng-deep button:-moz-focusring{outline:ButtonText dotted 1px}:host.td-markdown::ng-deep [type=checkbox]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}:host.td-markdown::ng-deep td,:host.td-markdown::ng-deep th{padding:0}:host.td-markdown::ng-deep *{-webkit-box-sizing:border-box;box-sizing:border-box}:host.td-markdown::ng-deep hr::before{display:table;content:""}:host.td-markdown::ng-deep hr::after{display:table;clear:both;content:""}:host.td-markdown::ng-deep p{margin-top:0;margin-bottom:10px}:host.td-markdown::ng-deep blockquote{margin:0}:host.td-markdown::ng-deep ol,:host.td-markdown::ng-deep ul{margin-top:0;margin-bottom:0;padding-left:2em}:host.td-markdown::ng-deep ol ol,:host.td-markdown::ng-deep ul ol{list-style-type:lower-roman}:host.td-markdown::ng-deep ol ol ol,:host.td-markdown::ng-deep ol ul ol,:host.td-markdown::ng-deep ul ol ol,:host.td-markdown::ng-deep ul ul ol{list-style-type:lower-alpha}:host.td-markdown::ng-deep dd{margin-left:0}:host.td-markdown::ng-deep code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace}:host.td-markdown::ng-deep pre{margin-top:0;margin-bottom:0;font:12px Consolas,"Liberation Mono",Menlo,Courier,monospace;word-wrap:normal}:host.td-markdown::ng-deep .pl-0{padding-left:0!important}:host.td-markdown::ng-deep .pl-1{padding-left:3px!important}:host.td-markdown::ng-deep .pl-2{padding-left:6px!important}:host.td-markdown::ng-deep .pl-3{padding-left:12px!important}:host.td-markdown::ng-deep .pl-4{padding-left:24px!important}:host.td-markdown::ng-deep .pl-5{padding-left:36px!important}:host.td-markdown::ng-deep .pl-6{padding-left:48px!important}:host.td-markdown::ng-deep .form-select::-ms-expand{opacity:0}:host.td-markdown::ng-deep a:not([href]){color:inherit;text-decoration:none}:host.td-markdown::ng-deep h1,:host.td-markdown::ng-deep h2,:host.td-markdown::ng-deep h3,:host.td-markdown::ng-deep h4,:host.td-markdown::ng-deep h5,:host.td-markdown::ng-deep h6{margin-top:1em;margin-bottom:16px;font-weight:700;line-height:1.4}:host.td-markdown::ng-deep h1 .octicon-link,:host.td-markdown::ng-deep h2 .octicon-link,:host.td-markdown::ng-deep h3 .octicon-link,:host.td-markdown::ng-deep h4 .octicon-link,:host.td-markdown::ng-deep h5 .octicon-link,:host.td-markdown::ng-deep h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}:host.td-markdown::ng-deep h1:hover .anchor,:host.td-markdown::ng-deep h2:hover .anchor,:host.td-markdown::ng-deep h3:hover .anchor,:host.td-markdown::ng-deep h4:hover .anchor,:host.td-markdown::ng-deep h5:hover .anchor,:host.td-markdown::ng-deep h6:hover .anchor{text-decoration:none}:host.td-markdown::ng-deep h1:hover .anchor .octicon-link,:host.td-markdown::ng-deep h2:hover .anchor .octicon-link,:host.td-markdown::ng-deep h3:hover .anchor .octicon-link,:host.td-markdown::ng-deep h4:hover .anchor .octicon-link,:host.td-markdown::ng-deep h5:hover .anchor .octicon-link,:host.td-markdown::ng-deep h6:hover .anchor .octicon-link{visibility:visible}:host.td-markdown::ng-deep h1{padding-bottom:.3em;font-size:2.25em;line-height:1.2;border-bottom-width:1px;border-bottom-style:solid}:host.td-markdown::ng-deep h1 .anchor{line-height:1}:host.td-markdown::ng-deep h2{padding-bottom:.3em;font-size:1.75em;line-height:1.225;border-bottom-width:1px;border-bottom-style:solid}:host.td-markdown::ng-deep h2 .anchor{line-height:1}:host.td-markdown::ng-deep h3{font-size:1.5em;line-height:1.43}:host.td-markdown::ng-deep h3 .anchor{line-height:1.2}:host.td-markdown::ng-deep h4{font-size:1.25em}:host.td-markdown::ng-deep h4 .anchor{line-height:1.2}:host.td-markdown::ng-deep h5{font-size:1em}:host.td-markdown::ng-deep h5 .anchor{line-height:1.1}:host.td-markdown::ng-deep h6{font-size:1em}:host.td-markdown::ng-deep h6 .anchor{line-height:1.1}:host.td-markdown::ng-deep blockquote,:host.td-markdown::ng-deep dl,:host.td-markdown::ng-deep ol,:host.td-markdown::ng-deep p,:host.td-markdown::ng-deep pre,:host.td-markdown::ng-deep table,:host.td-markdown::ng-deep ul{margin-top:0;margin-bottom:16px}:host.td-markdown::ng-deep hr{height:0;overflow:hidden;background:0 0;border-bottom-width:1px;border-bottom-style:solid;margin:16px 0}:host.td-markdown::ng-deep ol ol,:host.td-markdown::ng-deep ol ul,:host.td-markdown::ng-deep ul ol,:host.td-markdown::ng-deep ul ul{margin-top:0;margin-bottom:0}:host.td-markdown::ng-deep li>p{margin-top:16px}:host.td-markdown::ng-deep dl{padding:0}:host.td-markdown::ng-deep dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}:host.td-markdown::ng-deep dl dd{padding:0 16px;margin-bottom:16px}:host.td-markdown::ng-deep blockquote{padding:0 15px;border-left-width:4px;border-left-style:solid}:host.td-markdown::ng-deep blockquote>:first-child{margin-top:0}:host.td-markdown::ng-deep blockquote>:last-child{margin-bottom:0}:host.td-markdown::ng-deep table{border-spacing:0;border-collapse:collapse;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}:host.td-markdown::ng-deep table th{font-weight:700}:host.td-markdown::ng-deep table td,:host.td-markdown::ng-deep table th{padding:6px 13px;border-width:1px;border-style:solid}:host.td-markdown::ng-deep table tr{border-top-width:1px;border-top-style:solid}:host.td-markdown::ng-deep img{max-width:100%;-webkit-box-sizing:content-box;box-sizing:content-box}:host.td-markdown::ng-deep code{padding:.2em 0;margin:0;font-size:85%;border-radius:3px}:host.td-markdown::ng-deep code:after,:host.td-markdown::ng-deep code:before{letter-spacing:-.2em}:host.td-markdown::ng-deep pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}:host.td-markdown::ng-deep .highlight{margin-bottom:16px}:host.td-markdown::ng-deep .highlight pre,:host.td-markdown::ng-deep pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;border-radius:3px}:host.td-markdown::ng-deep .highlight pre{margin-bottom:0;word-break:normal}:host.td-markdown::ng-deep pre code{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}:host.td-markdown::ng-deep pre code:after,:host.td-markdown::ng-deep pre code:before{content:normal}:host.td-markdown::ng-deep .pl-c{color:#969896}:host.td-markdown::ng-deep .pl-c1,:host.td-markdown::ng-deep .pl-s .pl-v{color:#0086b3}:host.td-markdown::ng-deep .pl-e,:host.td-markdown::ng-deep .pl-en{color:#795da3}:host.td-markdown::ng-deep .pl-s .pl-s1,:host.td-markdown::ng-deep .pl-smi{color:#333}:host.td-markdown::ng-deep .pl-ent{color:#63a35c}:host.td-markdown::ng-deep .pl-k{color:#a71d5d}:host.td-markdown::ng-deep .pl-pds,:host.td-markdown::ng-deep .pl-s,:host.td-markdown::ng-deep .pl-s .pl-pse .pl-s1,:host.td-markdown::ng-deep .pl-sr,:host.td-markdown::ng-deep .pl-sr .pl-cce,:host.td-markdown::ng-deep .pl-sr .pl-sra,:host.td-markdown::ng-deep .pl-sr .pl-sre{color:#183691}:host.td-markdown::ng-deep .pl-v{color:#ed6a43}:host.td-markdown::ng-deep .pl-id{color:#b52a1d}:host.td-markdown::ng-deep .pl-ii{background-color:#b52a1d;color:#f8f8f8}:host.td-markdown::ng-deep .pl-sr .pl-cce{color:#63a35c;font-weight:700}:host.td-markdown::ng-deep .pl-ml{color:#693a17}:host.td-markdown::ng-deep .pl-mh,:host.td-markdown::ng-deep .pl-mh .pl-en,:host.td-markdown::ng-deep .pl-ms{color:#1d3e81;font-weight:700}:host.td-markdown::ng-deep .pl-mq{color:teal}:host.td-markdown::ng-deep .pl-mi{color:#333;font-style:italic}:host.td-markdown::ng-deep .pl-mb{color:#333;font-weight:700}:host.td-markdown::ng-deep .pl-md{background-color:#ffecec;color:#bd2c00}:host.td-markdown::ng-deep .pl-mi1{background-color:#eaffea;color:#55a532}:host.td-markdown::ng-deep .pl-mdr{color:#795da3;font-weight:700}:host.td-markdown::ng-deep .pl-mo{color:#1d3e81}:host.td-markdown::ng-deep kbd{display:inline-block;padding:3px 5px;font:11px/10px Consolas,"Liberation Mono",Menlo,Courier,monospace;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;-webkit-box-shadow:inset 0 -1px 0 #bbb;box-shadow:inset 0 -1px 0 #bbb}:host.td-markdown::ng-deep .full-commit .btn-outline:not(:disabled):hover{color:#4078c0;border:1px solid #4078c0}:host.td-markdown::ng-deep :checked+.radio-label{position:relative;z-index:1;border-color:#4078c0}:host.td-markdown::ng-deep .octicon{display:inline-block;vertical-align:text-top;fill:currentColor}:host.td-markdown::ng-deep .task-list-item{list-style-type:none}:host.td-markdown::ng-deep .task-list-item+.task-list-item{margin-top:3px}:host.td-markdown::ng-deep .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}']}]}],f.ctorParameters=function(){return[{type:a.Renderer2},{type:a.ElementRef},{type:o.DomSanitizer}]},f.propDecorators={"class":[{type:a.HostBinding,args:["class"]}],content:[{type:a.Input,args:["content"]}],simpleLineBreaks:[{type:a.Input,args:["simpleLineBreaks"]}],hostedUrl:[{type:a.Input,args:["hostedUrl"]}],anchor:[{type:a.Input,args:["anchor"]}],onContentReady:[{type:a.Output,args:["contentReady"]}]},f);function f(e,t,o){this._renderer=e,this._elementRef=t,this._domSanitizer=o,this._simpleLineBreaks=!1,this._viewInit=!1,this["class"]="td-markdown",this.onContentReady=new a.EventEmitter}var b=(y.decorators=[{type:a.NgModule,args:[{imports:[t.CommonModule],declarations:[k],exports:[k]}]}],y);function y(){}var v=(x.prototype.load=function(d,i){return void 0===i&&(i={}),r(this,void 0,void 0,function(){var t,o,n,r;return h(this,function(e){switch(e.label){case 0:return t=this._sanitizer.sanitize(a.SecurityContext.URL,d),g(o=t)&&(o=c(t)),[4,this._http.get(o,s({},i,{responseType:"text",observe:"response"})).toPromise()];case 1:if(n=e.sent(),(r=n.headers.get("Content-Type")).includes("text/plain")||r.includes("text/markdown"))return[2,n.body];throw Error(r+" is not a handled content type")}})})},x.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],x.ctorParameters=function(){return[{type:n.HttpClient},{type:a.Sanitizer}]},x.ngInjectableDef=a.defineInjectable({factory:function(){return new x(a.inject(n.HttpClient),a.inject(a.Sanitizer))},token:x,providedIn:"root"}),x);function x(e,t){this._http=e,this._sanitizer=t}e.CovalentMarkdownModule=b,e.TdMarkdownComponent=k,e.removeLeadingHash=d,e.removeTrailingHash=i,e.normalizeAnchor=l,e.scrollToAnchor=p,e.isAnchorLink=m,e.rawGithubHref=c,e.isGithubHref=g,e.MarkdownLoaderService=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=covalent-markdown.umd.min.js.map