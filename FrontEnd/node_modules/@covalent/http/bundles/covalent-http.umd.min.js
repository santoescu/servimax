!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@covalent/http",["exports","@angular/core","rxjs","@angular/common/http"],t):t((e.covalent=e.covalent||{},e.covalent.http={}),e.ng.core,e.rxjs,e.ng.common.http)}(this,function(e,p,a,I){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function u(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function P(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)i.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a["return"])&&r.call(a)}finally{if(o)throw o.error}}return i}var o=(Object.defineProperty(t.prototype,"requestInterceptors",{get:function(){return this._requestInterceptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpInterceptorMatcher",{get:function(){return this._httpInterceptorMatcher},enumerable:!0,configurable:!0}),t);function t(t,e,r){var n=this;this._injector=t,this._httpInterceptorMatcher=e,this._requestInterceptors=[],r.forEach(function(e){n._requestInterceptors.push({interceptor:t.get(e.interceptor),paths:e.paths})})}var i,c=(u(r,i=I.HttpClient),r.prototype.request=function(e,t,r){var n=this;void 0===r&&(r={});var o=this._interceptorBehavior.requestInterceptors.filter(function(e){return n._interceptorBehavior.httpInterceptorMatcher.matches({url:t},e)}).map(function(e){return e.interceptor});return this._setupRequest(e,t,r,o)},r.prototype._setupRequest=function(e,t,r,n){try{r=this._requestResolve(r,n)}catch(o){return new a.Observable(function(e){e.error(o)})}return this._handleResponseResolve(i.prototype.request.call(this,e,t,r),n)},r.prototype._requestResolve=function(t,e){return e.forEach(function(e){e.handleOptions&&(t=e.handleOptions(t))}),t},r.prototype._handleResponseResolve=function(t,e){return e.reverse().forEach(function(e){e.handleResponse&&(t=e.handleResponse(t))}),t},r);function r(e,t){var r=i.call(this,e)||this;return r._handler=e,r._interceptorBehavior=t,r}function l(){try{return p.inject(p.INJECTOR)}catch(e){if(!d._injector)throw new Error("Please add CovalentHttpModule into your imports.");return d._injector}}function s(o,e,t){void 0===t&&(t=c);var a,r,n=(u(i,a=o),i);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=a.apply(this,function n(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}(e&&e.length?e:function c(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n];if(o)if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");for(var a=undefined,i=p.InjectFlags.Default,s=0;s<o.length;s++){var u=o[s];u instanceof p.Optional||"Optional"===u.ngMetadataName?i|=p.InjectFlags.Optional:u instanceof p.SkipSelf||"SkipSelf"===u.ngMetadataName?i|=p.InjectFlags.SkipSelf:u instanceof p.Self||"Self"===u.ngMetadataName?i|=p.InjectFlags.Self:a=u instanceof p.Inject?u.token:u}r.push(t.get(a,i))}else r.push(t.get(o))}return r}((new p.ɵReflectionCapabilities).parameters(o),l())))||this;return r._injector=l(),r.buildConfig(),r}return u(s,r=n),Object.defineProperty(s.prototype,"baseUrl",{get:function(){return("string"==typeof this.basePath?this.basePath.replace(/\/$/,""):"")+this._baseUrl},enumerable:!0,configurable:!0}),s.prototype.buildConfig=function(){this.http=this._injector.get(t),this._baseUrl=e&&e.baseUrl?e.baseUrl.replace(/\/$/,""):"",this._baseHeaders=e&&e.baseHeaders?e.baseHeaders:new I.HttpHeaders,this._defaultObserve=e&&e.defaultObserve?e.defaultObserve:"body",this._defaultResponseType=e&&e.defaultResponseType?e.defaultResponseType:"json"},s.prototype.buildHeaders=function(){var t=this,r={};return this._baseHeaders.keys().forEach(function(e){r[e]=t._baseHeaders.get(e)}),new I.HttpHeaders(r)},s.prototype.buildRequest=function(e,t,r){return this._buildRequest(e,t,r)},s.prototype._buildRequest=function(e,t,r){if(void 0===r&&(r={}),r.responseType||(r.responseType=this._defaultResponseType),r.observe||(r.observe=this._defaultObserve),r.headers){var n=this.buildHeaders();if(r.headers instanceof I.HttpHeaders)r.headers.keys().forEach(function(e){n=n.set(e,r.headers.get(e))});else for(var o in r.headers)n=n.set(o,r.headers[o]);r.headers=n}else r.headers=this.buildHeaders();return this.http.request(e,t,r)},s;function s(){return null!==r&&r.apply(this,arguments)||this}}var d=(h._injector=undefined,h.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],h.ctorParameters=function(){return[{type:p.Injector}]},h.ngInjectableDef=p.defineInjectable({factory:function(){return new h(p.inject(p.INJECTOR))},token:h,providedIn:"root"}),h);function h(e){h._injector=e}var v=(y.prototype.matches=function(t,e){return 0<e.paths.filter(function(e){return!!(e=e.replace(/\*\*/gi,"<>").replace(/\*/gi,"[a-zA-Z0-9\\-_]+").replace(/<>/gi,"[a-zA-Z0-9\\-_/]*"))&&(e+="(\\?{1}.*)?$",new RegExp(e).test(t.url))}).length},y);function y(){}var b=new p.InjectionToken("HTTP_CONFIG");function g(e,t,r){return new c(e,new o(t,new v,r.interceptors))}var m={provide:c,useFactory:g,deps:[I.HttpHandler,p.Injector,b]},_=(T.forRoot=function(e){return void 0===e&&(e={interceptors:[]}),{ngModule:T,providers:[{provide:b,useValue:e},m]}},T.decorators=[{type:p.NgModule,args:[{imports:[I.HttpClientModule],providers:[d]}]}],T.ctorParameters=function(){return[{type:d}]},T);function T(e){this._internalHttpService=e}var x=Symbol("TdHttpRESTParam");function j(o,a){return function(e,t,r){var n=Reflect.getOwnMetadata(x,e,t)||[];n.push({index:r,param:a,type:o}),Reflect.defineMetadata(x,n,e,t)}}var E=a.of(undefined);function w(e,t){var n=e;if(t instanceof I.HttpParams)t.keys().forEach(function(r){t.get(r)!==undefined&&t.getAll(r).forEach(function(e,t){n=0===t?n.set(r,e):n.append(r,e)})});else{var r=function(r){t[r]!==undefined&&(t[r]instanceof Array?t[r].forEach(function(e,t){n=0===t?n.set(r,e):n.append(r,e)}):n=n.set(r,t[r]))};for(var o in t)r(o)}return n}function H(R){return function(j,H,e){var O=e.value;e.value=function(){var e,t,r,n;try{var o=R.path,a=Reflect.getOwnMetadata(x,j,H),i=[],s=void 0,u=new I.HttpParams;if(a)try{for(var c=P(a),p=c.next();!p.done;p=c.next()){if("param"===(b=p.value).type)i[b.index]=arguments[b.index],o=o.replace(":"+b.param,arguments[b.index]);else if("body"===b.type)i[b.index]=arguments[b.index],s=arguments[b.index];else if("queryParams"===b.type){i[b.index]=arguments[b.index];var f=arguments[b.index];R.options&&R.options.params&&(u=w(u,R.options.params)),f&&(u=w(u,f))}}}catch(m){e={error:m}}finally{try{p&&!p.done&&(t=c["return"])&&t.call(c)}finally{if(e)throw e.error}}var l=this.baseUrl+o,d=Object.assign({},R.options,{body:s,params:u}),h=this.buildRequest(R.method,l,d);if(a)try{for(var v=P(a),y=v.next();!y.done;y=v.next()){var b;"response"===(b=y.value).type&&(i[b.index]=h)}}catch(_){r={error:_}}finally{try{y&&!y.done&&(n=v["return"])&&n.call(v)}finally{if(r)throw r.error}}var g=O.apply(this,i);return g===E||g===undefined?h:g}catch(T){console.error(T)}}}}e.TdHttpService=c,e.httpFactory=g,e.HTTP_CONFIG=b,e.HTTP_INTERCEPTOR_PROVIDER=m,e.CovalentHttpModule=_,e.TdURLRegExpInterceptorMatcher=v,e.TdGET=function O(e){return H(Object.assign({method:"GET"},e))},e.TdPOST=function R(e){return H(Object.assign({method:"POST"},e))},e.TdPATCH=function q(e){return H(Object.assign({method:"PATCH"},e))},e.TdPUT=function S(e){return H(Object.assign({method:"PUT"},e))},e.TdDELETE=function M(e){return H(Object.assign({method:"DELETE"},e))},e.TdHttp=function C(n){return function(e){return u(t,r=s(e,n,c)),t;function t(){return null!==r&&r.apply(this,arguments)||this}var r}},e.TdHttpClient=function A(n){return function(e){return u(t,r=s(e,n,I.HttpClient)),t;function t(){return null!==r&&r.apply(this,arguments)||this}var r}},e.TdParam=function k(e){return j("param",e)},e.TdBody=function N(){return j("body")},e.TdResponse=function U(){return j("response")},e.TdQueryParams=function F(){return j("queryParams")},e.getInjector=l,e.mixinHttp=s,e.InternalHttpService=d,e.ɵb=d,e.ɵa=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=covalent-http.umd.min.js.map