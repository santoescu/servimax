/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { Observable, interval } from 'rxjs';
import * as i0 from "@angular/core";
export class CountupTimerService {
    constructor() {
        //Init
        this.timerValue = {
            seconds: '00',
            mins: '00',
            hours: '00',
        };
        this.isTimerStart = false;
        this.totalSeconds = 0;
        this.currentOperationId = 0;
        //start timer
        this.startTimer = (/**
         * @param {?=} startTime
         * @return {?}
         */
        (startTime) => {
            if (startTime) {
                /** @type {?} */
                let currentDate = new Date();
                /** @type {?} */
                let startedTime = new Date(startTime);
                this.totalSeconds = Math.round((currentDate.getTime() - startedTime.getTime()) / 1000);
            }
            this.isTimerStart = true;
            return true;
        });
        //end timer
        this.pauseTimer = (/**
         * @param {?=} startTime
         * @param {?=} endTime
         * @return {?}
         */
        (startTime, endTime) => {
            if (startTime && endTime) {
                /** @type {?} */
                let endedDate = new Date(endTime);
                /** @type {?} */
                let startedTime = new Date(startTime);
                this.totalSeconds = Math.round((endedDate.getTime() - startedTime.getTime()) / 1000);
            }
            this.isTimerStart = false;
            return false;
        });
        //reset Timer
        this.stopTimer = (/**
         * @return {?}
         */
        () => {
            this.isTimerStart = false;
            this.totalSeconds = 0;
        });
        //get timer value Obj
        this.getTimerValue = (/**
         * @return {?}
         */
        () => {
            return new Observable((/**
             * @param {?} obs
             * @return {?}
             */
            obs => {
                if (this.intervalSubscription) {
                    this.intervalSubscription.unsubscribe();
                }
                this.intervalSubscription = this.interval.subscribe((/**
                 * @param {?} int
                 * @return {?}
                 */
                int => {
                    if (this.isTimerStart) {
                        ++this.totalSeconds;
                        this.timerValue.seconds = this.setTimervalue(this.totalSeconds % 60);
                        /** @type {?} */
                        let totalSecondsForMinutes = 0;
                        totalSecondsForMinutes = (Math.trunc(this.totalSeconds / 60) >= 60) ? (this.totalSeconds / 60) % 60 : this.totalSeconds / 60;
                        this.timerValue.mins = this.setTimervalue(Math.trunc(totalSecondsForMinutes));
                        this.timerValue.hours = this.setTimervalue(Math.trunc(this.totalSeconds / 3600));
                        obs.next(this.timerValue);
                        obs.complete();
                    }
                    else {
                        if (this.totalSeconds > 0) {
                            this.timerValue.seconds = this.setTimervalue(this.totalSeconds % 60);
                            /** @type {?} */
                            let totalSecondsForMinutes = 0;
                            totalSecondsForMinutes = (Math.trunc(this.totalSeconds / 60) >= 60) ? (this.totalSeconds / 60) % 60 : this.totalSeconds / 60;
                            this.timerValue.mins = this.setTimervalue(Math.trunc(totalSecondsForMinutes));
                            this.timerValue.hours = this.setTimervalue(Math.trunc(this.totalSeconds / 3600));
                        }
                        else {
                            this.timerValue.hours = "00";
                            this.timerValue.mins = "00";
                            this.timerValue.seconds = "00";
                        }
                        obs.next(this.timerValue);
                        obs.complete();
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                error => {
                    obs.error(error);
                    obs.complete();
                }));
            }));
        });
        //set timer value
        this.setTimervalue = (/**
         * @param {?} val
         * @return {?}
         */
        (val) => {
            /** @type {?} */
            let valString = val + "";
            return (valString.length < 2) ? "0" + valString : valString;
        });
        this.interval = interval(1000);
    }
}
CountupTimerService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
CountupTimerService.ctorParameters = () => [];
/** @nocollapse */ CountupTimerService.ngInjectableDef = i0.defineInjectable({ factory: function CountupTimerService_Factory() { return new CountupTimerService(); }, token: CountupTimerService, providedIn: "root" });
if (false) {
    /** @type {?} */
    CountupTimerService.prototype.timerValue;
    /** @type {?} */
    CountupTimerService.prototype.isTimerStart;
    /** @type {?} */
    CountupTimerService.prototype.interval;
    /** @type {?} */
    CountupTimerService.prototype.intervalSubscription;
    /** @type {?} */
    CountupTimerService.prototype.totalSeconds;
    /** @type {?} */
    CountupTimerService.prototype.currentOperationId;
    /** @type {?} */
    CountupTimerService.prototype.startTimer;
    /** @type {?} */
    CountupTimerService.prototype.pauseTimer;
    /** @type {?} */
    CountupTimerService.prototype.stopTimer;
    /** @type {?} */
    CountupTimerService.prototype.getTimerValue;
    /** @type {?} */
    CountupTimerService.prototype.setTimervalue;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY291bnR1cC10aW1lci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXRpbWVyLyIsInNvdXJjZXMiOlsibGliL2NvdW50dXAtdGltZXIvY291bnR1cC10aW1lci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLE1BQU0sTUFBTSxDQUFDOztBQUs1QyxNQUFNLE9BQU8sbUJBQW1CO0lBYzlCOztRQVhPLGVBQVUsR0FBRztZQUNsQixPQUFPLEVBQUUsSUFBSTtZQUNiLElBQUksRUFBRSxJQUFJO1lBQ1YsS0FBSyxFQUFFLElBQUk7U0FDWixDQUFBO1FBQ00saUJBQVksR0FBWSxLQUFLLENBQUM7UUFHOUIsaUJBQVksR0FBVyxDQUFDLENBQUM7UUFDekIsdUJBQWtCLEdBQVcsQ0FBQyxDQUFDOztRQU90QyxlQUFVOzs7O1FBQUcsQ0FBQyxTQUFlLEVBQUUsRUFBRTtZQUMvQixJQUFJLFNBQVMsRUFBRTs7b0JBQ1QsV0FBVyxHQUFHLElBQUksSUFBSSxFQUFFOztvQkFDeEIsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFDckMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxHQUFHLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO2FBQ3hGO1lBQ0QsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7WUFDekIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDLEVBQUE7O1FBR0QsZUFBVTs7Ozs7UUFBRyxDQUFDLFNBQWUsRUFBRSxPQUFhLEVBQUUsRUFBRTtZQUM5QyxJQUFJLFNBQVMsSUFBSSxPQUFPLEVBQUU7O29CQUNwQixTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDOztvQkFDN0IsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFDckMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxHQUFHLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO2FBQ3RGO1lBQ0QsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7WUFDMUIsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDLEVBQUE7O1FBR0QsY0FBUzs7O1FBQUcsR0FBRyxFQUFFO1lBQ2YsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7WUFDMUIsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7UUFDeEIsQ0FBQyxFQUFBOztRQUdELGtCQUFhOzs7UUFBRyxHQUFvQixFQUFFO1lBQ3BDLE9BQU8sSUFBSSxVQUFVOzs7O1lBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQzFCLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFO29CQUM3QixJQUFJLENBQUMsb0JBQW9CLENBQUMsV0FBVyxFQUFFLENBQUM7aUJBQ3pDO2dCQUNELElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVM7Ozs7Z0JBQUMsR0FBRyxDQUFDLEVBQUU7b0JBQ3hELElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTt3QkFDckIsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDO3dCQUNwQixJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLENBQUM7OzRCQUNqRSxzQkFBc0IsR0FBRyxDQUFDO3dCQUM5QixzQkFBc0IsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7d0JBQzdILElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7d0JBQzlFLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7d0JBQ2pGLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO3dCQUMxQixHQUFHLENBQUMsUUFBUSxFQUFFLENBQUM7cUJBQ2hCO3lCQUFNO3dCQUNMLElBQUksSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLEVBQUU7NEJBQ3pCLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUMsQ0FBQzs7Z0NBQ2pFLHNCQUFzQixHQUFHLENBQUM7NEJBQzlCLHNCQUFzQixHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQzs0QkFDN0gsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQzs0QkFDOUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQzt5QkFDbEY7NkJBQU07NEJBQ0wsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDOzRCQUM3QixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7NEJBQzVCLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzt5QkFDaEM7d0JBQ0QsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7d0JBQzFCLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQztxQkFDaEI7Z0JBQ0gsQ0FBQzs7OztnQkFBRSxLQUFLLENBQUMsRUFBRTtvQkFDVCxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNqQixHQUFHLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ2pCLENBQUMsRUFBQyxDQUFDO1lBQ0wsQ0FBQyxFQUFDLENBQUM7UUFDTCxDQUFDLEVBQUE7O1FBR0Qsa0JBQWE7Ozs7UUFBRyxDQUFDLEdBQUcsRUFBRSxFQUFFOztnQkFDbEIsU0FBUyxHQUFHLEdBQUcsR0FBRyxFQUFFO1lBQ3hCLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7UUFDOUQsQ0FBQyxFQUFBO1FBekVDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2pDLENBQUM7OztZQW5CRixVQUFVLFNBQUM7Z0JBQ1YsVUFBVSxFQUFFLE1BQU07YUFDbkI7Ozs7Ozs7SUFJQyx5Q0FJQzs7SUFDRCwyQ0FBcUM7O0lBQ3JDLHVDQUFpQzs7SUFDakMsbURBQTRCOztJQUM1QiwyQ0FBZ0M7O0lBQ2hDLGlEQUFzQzs7SUFPdEMseUNBUUM7O0lBR0QseUNBUUM7O0lBR0Qsd0NBR0M7O0lBR0QsNENBbUNDOztJQUdELDRDQUdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBpbnRlcnZhbCB9IGZyb20gJ3J4anMnO1xyXG5cclxuQEluamVjdGFibGUoe1xyXG4gIHByb3ZpZGVkSW46ICdyb290J1xyXG59KVxyXG5leHBvcnQgY2xhc3MgQ291bnR1cFRpbWVyU2VydmljZSB7XHJcblxyXG4gIC8vSW5pdFxyXG4gIHB1YmxpYyB0aW1lclZhbHVlID0ge1xyXG4gICAgc2Vjb25kczogJzAwJyxcclxuICAgIG1pbnM6ICcwMCcsXHJcbiAgICBob3VyczogJzAwJyxcclxuICB9XHJcbiAgcHVibGljIGlzVGltZXJTdGFydDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHB1YmxpYyBpbnRlcnZhbDogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gIHB1YmxpYyBpbnRlcnZhbFN1YnNjcmlwdGlvbjtcclxuICBwdWJsaWMgdG90YWxTZWNvbmRzOiBudW1iZXIgPSAwO1xyXG4gIHB1YmxpYyBjdXJyZW50T3BlcmF0aW9uSWQ6IG51bWJlciA9IDA7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5pbnRlcnZhbCA9IGludGVydmFsKDEwMDApO1xyXG4gIH1cclxuXHJcbiAgLy9zdGFydCB0aW1lclxyXG4gIHN0YXJ0VGltZXIgPSAoc3RhcnRUaW1lPzogYW55KSA9PiB7XHJcbiAgICBpZiAoc3RhcnRUaW1lKSB7XHJcbiAgICAgIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGxldCBzdGFydGVkVGltZSA9IG5ldyBEYXRlKHN0YXJ0VGltZSk7XHJcbiAgICAgIHRoaXMudG90YWxTZWNvbmRzID0gTWF0aC5yb3VuZCgoY3VycmVudERhdGUuZ2V0VGltZSgpIC0gc3RhcnRlZFRpbWUuZ2V0VGltZSgpKSAvIDEwMDApO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pc1RpbWVyU3RhcnQgPSB0cnVlO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvL2VuZCB0aW1lclxyXG4gIHBhdXNlVGltZXIgPSAoc3RhcnRUaW1lPzogYW55LCBlbmRUaW1lPzogYW55KSA9PiB7XHJcbiAgICBpZiAoc3RhcnRUaW1lICYmIGVuZFRpbWUpIHtcclxuICAgICAgbGV0IGVuZGVkRGF0ZSA9IG5ldyBEYXRlKGVuZFRpbWUpO1xyXG4gICAgICBsZXQgc3RhcnRlZFRpbWUgPSBuZXcgRGF0ZShzdGFydFRpbWUpO1xyXG4gICAgICB0aGlzLnRvdGFsU2Vjb25kcyA9IE1hdGgucm91bmQoKGVuZGVkRGF0ZS5nZXRUaW1lKCkgLSBzdGFydGVkVGltZS5nZXRUaW1lKCkpIC8gMTAwMCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmlzVGltZXJTdGFydCA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy9yZXNldCBUaW1lclxyXG4gIHN0b3BUaW1lciA9ICgpID0+IHtcclxuICAgIHRoaXMuaXNUaW1lclN0YXJ0ID0gZmFsc2U7XHJcbiAgICB0aGlzLnRvdGFsU2Vjb25kcyA9IDA7XHJcbiAgfVxyXG5cclxuICAvL2dldCB0aW1lciB2YWx1ZSBPYmpcclxuICBnZXRUaW1lclZhbHVlID0gKCk6IE9ic2VydmFibGU8YW55PiA9PiB7XHJcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUob2JzID0+IHtcclxuICAgICAgaWYgKHRoaXMuaW50ZXJ2YWxTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICB0aGlzLmludGVydmFsU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5pbnRlcnZhbFN1YnNjcmlwdGlvbiA9IHRoaXMuaW50ZXJ2YWwuc3Vic2NyaWJlKGludCA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNUaW1lclN0YXJ0KSB7XHJcbiAgICAgICAgICArK3RoaXMudG90YWxTZWNvbmRzO1xyXG4gICAgICAgICAgdGhpcy50aW1lclZhbHVlLnNlY29uZHMgPSB0aGlzLnNldFRpbWVydmFsdWUodGhpcy50b3RhbFNlY29uZHMgJSA2MCk7XHJcbiAgICAgICAgICBsZXQgdG90YWxTZWNvbmRzRm9yTWludXRlcyA9IDA7XHJcbiAgICAgICAgICB0b3RhbFNlY29uZHNGb3JNaW51dGVzID0gKE1hdGgudHJ1bmModGhpcy50b3RhbFNlY29uZHMgLyA2MCkgPj0gNjApID8gKHRoaXMudG90YWxTZWNvbmRzIC8gNjApICUgNjAgOiB0aGlzLnRvdGFsU2Vjb25kcyAvIDYwO1xyXG4gICAgICAgICAgdGhpcy50aW1lclZhbHVlLm1pbnMgPSB0aGlzLnNldFRpbWVydmFsdWUoTWF0aC50cnVuYyh0b3RhbFNlY29uZHNGb3JNaW51dGVzKSk7XHJcbiAgICAgICAgICB0aGlzLnRpbWVyVmFsdWUuaG91cnMgPSB0aGlzLnNldFRpbWVydmFsdWUoTWF0aC50cnVuYyh0aGlzLnRvdGFsU2Vjb25kcyAvIDM2MDApKTtcclxuICAgICAgICAgIG9icy5uZXh0KHRoaXMudGltZXJWYWx1ZSk7XHJcbiAgICAgICAgICBvYnMuY29tcGxldGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHRoaXMudG90YWxTZWNvbmRzID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyVmFsdWUuc2Vjb25kcyA9IHRoaXMuc2V0VGltZXJ2YWx1ZSh0aGlzLnRvdGFsU2Vjb25kcyAlIDYwKTtcclxuICAgICAgICAgICAgbGV0IHRvdGFsU2Vjb25kc0Zvck1pbnV0ZXMgPSAwO1xyXG4gICAgICAgICAgICB0b3RhbFNlY29uZHNGb3JNaW51dGVzID0gKE1hdGgudHJ1bmModGhpcy50b3RhbFNlY29uZHMgLyA2MCkgPj0gNjApID8gKHRoaXMudG90YWxTZWNvbmRzIC8gNjApICUgNjAgOiB0aGlzLnRvdGFsU2Vjb25kcyAvIDYwO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyVmFsdWUubWlucyA9IHRoaXMuc2V0VGltZXJ2YWx1ZShNYXRoLnRydW5jKHRvdGFsU2Vjb25kc0Zvck1pbnV0ZXMpKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lclZhbHVlLmhvdXJzID0gdGhpcy5zZXRUaW1lcnZhbHVlKE1hdGgudHJ1bmModGhpcy50b3RhbFNlY29uZHMgLyAzNjAwKSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyVmFsdWUuaG91cnMgPSBcIjAwXCI7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJWYWx1ZS5taW5zID0gXCIwMFwiO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyVmFsdWUuc2Vjb25kcyA9IFwiMDBcIjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG9icy5uZXh0KHRoaXMudGltZXJWYWx1ZSk7XHJcbiAgICAgICAgICBvYnMuY29tcGxldGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICBvYnMuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIG9icy5jb21wbGV0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy9zZXQgdGltZXIgdmFsdWVcclxuICBzZXRUaW1lcnZhbHVlID0gKHZhbCkgPT4ge1xyXG4gICAgbGV0IHZhbFN0cmluZyA9IHZhbCArIFwiXCI7XHJcbiAgICByZXR1cm4gKHZhbFN0cmluZy5sZW5ndGggPCAyKSA/IFwiMFwiICsgdmFsU3RyaW5nIDogdmFsU3RyaW5nO1xyXG4gIH1cclxufVxyXG4iXX0=