/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { Observable, interval } from 'rxjs';
import * as i0 from "@angular/core";
var CountupTimerService = /** @class */ (function () {
    function CountupTimerService() {
        var _this = this;
        //Init
        this.timerValue = {
            seconds: '00',
            mins: '00',
            hours: '00',
        };
        this.isTimerStart = false;
        this.totalSeconds = 0;
        this.currentOperationId = 0;
        //start timer
        this.startTimer = (/**
         * @param {?=} startTime
         * @return {?}
         */
        function (startTime) {
            if (startTime) {
                /** @type {?} */
                var currentDate = new Date();
                /** @type {?} */
                var startedTime = new Date(startTime);
                _this.totalSeconds = Math.round((currentDate.getTime() - startedTime.getTime()) / 1000);
            }
            _this.isTimerStart = true;
            return true;
        });
        //end timer
        this.pauseTimer = (/**
         * @param {?=} startTime
         * @param {?=} endTime
         * @return {?}
         */
        function (startTime, endTime) {
            if (startTime && endTime) {
                /** @type {?} */
                var endedDate = new Date(endTime);
                /** @type {?} */
                var startedTime = new Date(startTime);
                _this.totalSeconds = Math.round((endedDate.getTime() - startedTime.getTime()) / 1000);
            }
            _this.isTimerStart = false;
            return false;
        });
        //reset Timer
        this.stopTimer = (/**
         * @return {?}
         */
        function () {
            _this.isTimerStart = false;
            _this.totalSeconds = 0;
        });
        //get timer value Obj
        this.getTimerValue = (/**
         * @return {?}
         */
        function () {
            return new Observable((/**
             * @param {?} obs
             * @return {?}
             */
            function (obs) {
                if (_this.intervalSubscription) {
                    _this.intervalSubscription.unsubscribe();
                }
                _this.intervalSubscription = _this.interval.subscribe((/**
                 * @param {?} int
                 * @return {?}
                 */
                function (int) {
                    if (_this.isTimerStart) {
                        ++_this.totalSeconds;
                        _this.timerValue.seconds = _this.setTimervalue(_this.totalSeconds % 60);
                        /** @type {?} */
                        var totalSecondsForMinutes = 0;
                        totalSecondsForMinutes = (Math.trunc(_this.totalSeconds / 60) >= 60) ? (_this.totalSeconds / 60) % 60 : _this.totalSeconds / 60;
                        _this.timerValue.mins = _this.setTimervalue(Math.trunc(totalSecondsForMinutes));
                        _this.timerValue.hours = _this.setTimervalue(Math.trunc(_this.totalSeconds / 3600));
                        obs.next(_this.timerValue);
                        obs.complete();
                    }
                    else {
                        if (_this.totalSeconds > 0) {
                            _this.timerValue.seconds = _this.setTimervalue(_this.totalSeconds % 60);
                            /** @type {?} */
                            var totalSecondsForMinutes = 0;
                            totalSecondsForMinutes = (Math.trunc(_this.totalSeconds / 60) >= 60) ? (_this.totalSeconds / 60) % 60 : _this.totalSeconds / 60;
                            _this.timerValue.mins = _this.setTimervalue(Math.trunc(totalSecondsForMinutes));
                            _this.timerValue.hours = _this.setTimervalue(Math.trunc(_this.totalSeconds / 3600));
                        }
                        else {
                            _this.timerValue.hours = "00";
                            _this.timerValue.mins = "00";
                            _this.timerValue.seconds = "00";
                        }
                        obs.next(_this.timerValue);
                        obs.complete();
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    obs.error(error);
                    obs.complete();
                }));
            }));
        });
        //set timer value
        this.setTimervalue = (/**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            /** @type {?} */
            var valString = val + "";
            return (valString.length < 2) ? "0" + valString : valString;
        });
        this.interval = interval(1000);
    }
    CountupTimerService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    CountupTimerService.ctorParameters = function () { return []; };
    /** @nocollapse */ CountupTimerService.ngInjectableDef = i0.defineInjectable({ factory: function CountupTimerService_Factory() { return new CountupTimerService(); }, token: CountupTimerService, providedIn: "root" });
    return CountupTimerService;
}());
export { CountupTimerService };
if (false) {
    /** @type {?} */
    CountupTimerService.prototype.timerValue;
    /** @type {?} */
    CountupTimerService.prototype.isTimerStart;
    /** @type {?} */
    CountupTimerService.prototype.interval;
    /** @type {?} */
    CountupTimerService.prototype.intervalSubscription;
    /** @type {?} */
    CountupTimerService.prototype.totalSeconds;
    /** @type {?} */
    CountupTimerService.prototype.currentOperationId;
    /** @type {?} */
    CountupTimerService.prototype.startTimer;
    /** @type {?} */
    CountupTimerService.prototype.pauseTimer;
    /** @type {?} */
    CountupTimerService.prototype.stopTimer;
    /** @type {?} */
    CountupTimerService.prototype.getTimerValue;
    /** @type {?} */
    CountupTimerService.prototype.setTimervalue;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY291bnR1cC10aW1lci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXRpbWVyLyIsInNvdXJjZXMiOlsibGliL2NvdW50dXAtdGltZXIvY291bnR1cC10aW1lci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLE1BQU0sTUFBTSxDQUFDOztBQUU1QztJQWlCRTtRQUFBLGlCQUVDOztRQWJNLGVBQVUsR0FBRztZQUNsQixPQUFPLEVBQUUsSUFBSTtZQUNiLElBQUksRUFBRSxJQUFJO1lBQ1YsS0FBSyxFQUFFLElBQUk7U0FDWixDQUFBO1FBQ00saUJBQVksR0FBWSxLQUFLLENBQUM7UUFHOUIsaUJBQVksR0FBVyxDQUFDLENBQUM7UUFDekIsdUJBQWtCLEdBQVcsQ0FBQyxDQUFDOztRQU90QyxlQUFVOzs7O1FBQUcsVUFBQyxTQUFlO1lBQzNCLElBQUksU0FBUyxFQUFFOztvQkFDVCxXQUFXLEdBQUcsSUFBSSxJQUFJLEVBQUU7O29CQUN4QixXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDO2dCQUNyQyxLQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLEdBQUcsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7YUFDeEY7WUFDRCxLQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztZQUN6QixPQUFPLElBQUksQ0FBQztRQUNkLENBQUMsRUFBQTs7UUFHRCxlQUFVOzs7OztRQUFHLFVBQUMsU0FBZSxFQUFFLE9BQWE7WUFDMUMsSUFBSSxTQUFTLElBQUksT0FBTyxFQUFFOztvQkFDcEIsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQzs7b0JBQzdCLFdBQVcsR0FB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IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgaW50ZXJ2YWwgfSBmcm9tICdyeGpzJztcclxuXHJcbkBJbmplY3RhYmxlKHtcclxuICBwcm92aWRlZEluOiAncm9vdCdcclxufSlcclxuZXhwb3J0IGNsYXNzIENvdW50dXBUaW1lclNlcnZpY2Uge1xyXG5cclxuICAvL0luaXRcclxuICBwdWJsaWMgdGltZXJWYWx1ZSA9IHtcclxuICAgIHNlY29uZHM6ICcwMCcsXHJcbiAgICBtaW5zOiAnMDAnLFxyXG4gICAgaG91cnM6ICcwMCcsXHJcbiAgfVxyXG4gIHB1YmxpYyBpc1RpbWVyU3RhcnQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwdWJsaWMgaW50ZXJ2YWw6IE9ic2VydmFibGU8YW55PjtcclxuICBwdWJsaWMgaW50ZXJ2YWxTdWJzY3JpcHRpb247XHJcbiAgcHVibGljIHRvdGFsU2Vjb25kczogbnVtYmVyID0gMDtcclxuICBwdWJsaWMgY3VycmVudE9wZXJhdGlvbklkOiBudW1iZXIgPSAwO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuaW50ZXJ2YWwgPSBpbnRlcnZhbCgxMDAwKTtcclxuICB9XHJcblxyXG4gIC8vc3RhcnQgdGltZXJcclxuICBzdGFydFRpbWVyID0gKHN0YXJ0VGltZT86IGFueSkgPT4ge1xyXG4gICAgaWYgKHN0YXJ0VGltZSkge1xyXG4gICAgICBsZXQgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBsZXQgc3RhcnRlZFRpbWUgPSBuZXcgRGF0ZShzdGFydFRpbWUpO1xyXG4gICAgICB0aGlzLnRvdGFsU2Vjb25kcyA9IE1hdGgucm91bmQoKGN1cnJlbnREYXRlLmdldFRpbWUoKSAtIHN0YXJ0ZWRUaW1lLmdldFRpbWUoKSkgLyAxMDAwKTtcclxuICAgIH1cclxuICAgIHRoaXMuaXNUaW1lclN0YXJ0ID0gdHJ1ZTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLy9lbmQgdGltZXJcclxuICBwYXVzZVRpbWVyID0gKHN0YXJ0VGltZT86IGFueSwgZW5kVGltZT86IGFueSkgPT4ge1xyXG4gICAgaWYgKHN0YXJ0VGltZSAmJiBlbmRUaW1lKSB7XHJcbiAgICAgIGxldCBlbmRlZERhdGUgPSBuZXcgRGF0ZShlbmRUaW1lKTtcclxuICAgICAgbGV0IHN0YXJ0ZWRUaW1lID0gbmV3IERhdGUoc3RhcnRUaW1lKTtcclxuICAgICAgdGhpcy50b3RhbFNlY29uZHMgPSBNYXRoLnJvdW5kKChlbmRlZERhdGUuZ2V0VGltZSgpIC0gc3RhcnRlZFRpbWUuZ2V0VGltZSgpKSAvIDEwMDApO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pc1RpbWVyU3RhcnQgPSBmYWxzZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vcmVzZXQgVGltZXJcclxuICBzdG9wVGltZXIgPSAoKSA9PiB7XHJcbiAgICB0aGlzLmlzVGltZXJTdGFydCA9IGZhbHNlO1xyXG4gICAgdGhpcy50b3RhbFNlY29uZHMgPSAwO1xyXG4gIH1cclxuXHJcbiAgLy9nZXQgdGltZXIgdmFsdWUgT2JqXHJcbiAgZ2V0VGltZXJWYWx1ZSA9ICgpOiBPYnNlcnZhYmxlPGFueT4gPT4ge1xyXG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKG9icyA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmludGVydmFsU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaW50ZXJ2YWxTdWJzY3JpcHRpb24gPSB0aGlzLmludGVydmFsLnN1YnNjcmliZShpbnQgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVGltZXJTdGFydCkge1xyXG4gICAgICAgICAgKyt0aGlzLnRvdGFsU2Vjb25kcztcclxuICAgICAgICAgIHRoaXMudGltZXJWYWx1ZS5zZWNvbmRzID0gdGhpcy5zZXRUaW1lcnZhbHVlKHRoaXMudG90YWxTZWNvbmRzICUgNjApO1xyXG4gICAgICAgICAgbGV0IHRvdGFsU2Vjb25kc0Zvck1pbnV0ZXMgPSAwO1xyXG4gICAgICAgICAgdG90YWxTZWNvbmRzRm9yTWludXRlcyA9IChNYXRoLnRydW5jKHRoaXMudG90YWxTZWNvbmRzIC8gNjApID49IDYwKSA/ICh0aGlzLnRvdGFsU2Vjb25kcyAvIDYwKSAlIDYwIDogdGhpcy50b3RhbFNlY29uZHMgLyA2MDtcclxuICAgICAgICAgIHRoaXMudGltZXJWYWx1ZS5taW5zID0gdGhpcy5zZXRUaW1lcnZhbHVlKE1hdGgudHJ1bmModG90YWxTZWNvbmRzRm9yTWludXRlcykpO1xyXG4gICAgICAgICAgdGhpcy50aW1lclZhbHVlLmhvdXJzID0gdGhpcy5zZXRUaW1lcnZhbHVlKE1hdGgudHJ1bmModGhpcy50b3RhbFNlY29uZHMgLyAzNjAwKSk7XHJcbiAgICAgICAgICBvYnMubmV4dCh0aGlzLnRpbWVyVmFsdWUpO1xyXG4gICAgICAgICAgb2JzLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh0aGlzLnRvdGFsU2Vjb25kcyA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lclZhbHVlLnNlY29uZHMgPSB0aGlzLnNldFRpbWVydmFsdWUodGhpcy50b3RhbFNlY29uZHMgJSA2MCk7XHJcbiAgICAgICAgICAgIGxldCB0b3RhbFNlY29uZHNGb3JNaW51dGVzID0gMDtcclxuICAgICAgICAgICAgdG90YWxTZWNvbmRzRm9yTWludXRlcyA9IChNYXRoLnRydW5jKHRoaXMudG90YWxTZWNvbmRzIC8gNjApID49IDYwKSA/ICh0aGlzLnRvdGFsU2Vjb25kcyAvIDYwKSAlIDYwIDogdGhpcy50b3RhbFNlY29uZHMgLyA2MDtcclxuICAgICAgICAgICAgdGhpcy50aW1lclZhbHVlLm1pbnMgPSB0aGlzLnNldFRpbWVydmFsdWUoTWF0aC50cnVuYyh0b3RhbFNlY29uZHNGb3JNaW51dGVzKSk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJWYWx1ZS5ob3VycyA9IHRoaXMuc2V0VGltZXJ2YWx1ZShNYXRoLnRydW5jKHRoaXMudG90YWxTZWNvbmRzIC8gMzYwMCkpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lclZhbHVlLmhvdXJzID0gXCIwMFwiO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyVmFsdWUubWlucyA9IFwiMDBcIjtcclxuICAgICAgICAgICAgdGhpcy50aW1lclZhbHVlLnNlY29uZHMgPSBcIjAwXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBvYnMubmV4dCh0aGlzLnRpbWVyVmFsdWUpO1xyXG4gICAgICAgICAgb2JzLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgb2JzLmVycm9yKGVycm9yKTtcclxuICAgICAgICBvYnMuY29tcGxldGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vc2V0IHRpbWVyIHZhbHVlXHJcbiAgc2V0VGltZXJ2YWx1ZSA9ICh2YWwpID0+IHtcclxuICAgIGxldCB2YWxTdHJpbmcgPSB2YWwgKyBcIlwiO1xyXG4gICAgcmV0dXJuICh2YWxTdHJpbmcubGVuZ3RoIDwgMikgPyBcIjBcIiArIHZhbFN0cmluZyA6IHZhbFN0cmluZztcclxuICB9XHJcbn1cclxuIl19